#!/bin/bash

WEB_DIR=/home/www/website
OUT_FILE=/tmp/webhook.out
LOG_FILE=/tmp/webhook.log
GIT_UA="GitHub-Hookshot"

(while [ 1 ]; do
    nc -l 127.0.0.1 12345 > $OUT_FILE
    cat $OUT_FILE | grep "$GIT_UA" && \
    {
        cd $WEB_DIR
        # git checkout -- .
        git pull
        # You can also add other commands
    }
done) >$LOG_FILE 2>&1 &
